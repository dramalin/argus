<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Argus System Monitor</title>
		<script
			crossorigin
			src="https://unpkg.com/react@18/umd/react.development.js"
		></script>
		<script
			crossorigin
			src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
		></script>
		<!-- Ensure React is properly loaded -->
		<script>
			if (!window.React || !window.ReactDOM) {
				console.error(
					"React or ReactDOM not loaded properly!"
				);
				document.body.innerHTML =
					'<div style="color: white; padding: 20px; text-align: center;"><h1>Error Loading React</h1><p>Please check your internet connection and try again.</p></div>';
			}
		</script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<link rel="stylesheet" href="css/main.css" />
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>Argus System Monitor</h1>
				<p>Real-time Linux system monitoring</p>
			</div>

			<!-- Navigation Tabs -->
			<div class="navigation-tabs">
				<div
					class="nav-tab active"
					onclick="showTab('dashboard')"
					id="dashboard-tab"
				>
					System Dashboard
				</div>
				<div
					class="nav-tab"
					onclick="showTab('alert-status')"
					id="alert-status-tab"
				>
					Alert Status
				</div>
				<div
					class="nav-tab"
					onclick="showTab('alert-management')"
					id="alert-management-tab"
				>
					Alert Management
				</div>
			</div>

			<!-- System Dashboard -->
			<div id="dashboard-tab-content" class="tab-content">
				<div class="dashboard" id="dashboard">
					<div class="loading">
						Loading system metrics...
					</div>
				</div>
				<div class="process-table">
					<h2 class="card-title">
						Running Processes
					</h2>
					<div id="process-table-container">
						<div class="loading">
							Loading process data...
						</div>
					</div>
				</div>
			</div>

			<!-- Alert Status Dashboard -->
			<div
				id="alert-status-tab-content"
				class="tab-content"
				style="display: none"
			>
				<div class="alert-status-dashboard">
					<div class="alert-list-header">
						<h3>Alert Status Dashboard</h3>
						<div class="alert-actions">
							<button
								class="btn btn-secondary btn-sm"
								onclick="refreshAlertStatus()"
							>
								Refresh
							</button>
						</div>
					</div>
					<div id="alert-status-content">
						<div class="loading">
							Loading alert status...
						</div>
					</div>
				</div>
			</div>

			<!-- Alert Management -->
			<div
				id="alert-management-tab-content"
				class="tab-content"
				style="display: none"
			>
				<div class="alert-management">
					<div class="alert-management-tabs">
						<div
							class="alert-tab active"
							onclick="showAlertSection('alerts')"
							id="alerts-tab"
						>
							Alert Rules
						</div>
						<div
							class="alert-tab"
							onclick="showAlertSection('notifications')"
							id="notifications-tab"
						>
							Notifications
						</div>
					</div>

					<!-- Alert Rules Section -->
					<div
						id="alerts-content"
						class="alert-section-content"
					>
						<div class="alert-list-header">
							<h3>Alert Rules</h3>
							<div
								class="alert-actions"
							>
								<button
									class="btn btn-primary btn-sm"
									onclick="showCreateAlertForm()"
								>
									Create
									Alert
								</button>
								<button
									class="btn btn-secondary btn-sm"
									onclick="refreshAlerts()"
								>
									Refresh
								</button>
							</div>
						</div>
						<div id="alert-list">
							<div class="loading">
								Loading
								alerts...
							</div>
						</div>
					</div>

					<!-- Notifications Section -->
					<div
						id="notifications-content"
						class="alert-section-content"
						style="display: none"
					>
						<div
							class="notifications-header"
						>
							<h3>
								Recent
								Notifications
							</h3>
							<div
								class="notifications-actions"
							>
								<button
									class="btn btn-outline-secondary btn-sm"
									onclick="markAllAsRead()"
								>
									Mark All
									Read
								</button>
								<button
									class="btn btn-outline-secondary btn-sm"
									onclick="clearNotifications()"
								>
									Clear
									All
								</button>
								<button
									class="btn btn-secondary btn-sm"
									onclick="refreshNotifications()"
								>
									Refresh
								</button>
							</div>
						</div>
						<div
							id="notification-list"
							class="notification-list"
						>
							<div class="loading">
								Loading
								notifications...
							</div>
						</div>
					</div>

					<!-- Create Alert Form (Hidden by default) -->
					<div
						id="create-alert-form"
						class="alert-form-container"
						style="display: none"
					>
						<div class="card">
							<h3>
								Create New Alert
							</h3>
							<form
								id="alert-form"
								onsubmit="submitAlert(event)"
							>
								<div
									class="form-section"
								>
									<h4>
										Basic
										Information
									</h4>
									<div
										class="form-group"
									>
										<label
											for="alert-name"
											>Alert
											Name</label
										>
										<input
											type="text"
											id="alert-name"
											name="name"
											class="form-control"
											required
										/>
									</div>
									<div
										class="form-group"
									>
										<label
											for="alert-description"
											>Description</label
										>
										<input
											type="text"
											id="alert-description"
											name="description"
											class="form-control"
										/>
									</div>
									<div
										class="form-group"
									>
										<label
											for="alert-enabled"
										>
											<input
												type="checkbox"
												id="alert-enabled"
												name="enabled"
												class="form-check-input"
												checked
											/>
											Enable
											Alert
										</label>
									</div>
								</div>

								<div
									class="form-section"
								>
									<h4>
										Condition
									</h4>
									<div
										class="form-row"
									>
										<div
											class="col"
										>
											<label
												for="alert-metric"
												>Metric</label
											>
											<select
												id="alert-metric"
												name="metric"
												class="form-control"
												required
											>
												<option
													value=""
												>
													Select
													metric...
												</option>
												<option
													value="cpu_usage"
												>
													CPU
													Usage
													(%)
												</option>
												<option
													value="memory_usage"
												>
													Memory
													Usage
													(%)
												</option>
												<option
													value="load_average"
												>
													Load
													Average
													(1m)
												</option>
												<option
													value="disk_usage"
												>
													Disk
													Usage
													(%)
												</option>
												<option
													value="network_traffic"
												>
													Network
													Traffic
													(MB/s)
												</option>
											</select>
										</div>
										<div
											class="col"
										>
											<label
												for="alert-operator"
												>Operator</label
											>
											<select
												id="alert-operator"
												name="operator"
												class="form-control"
												required
											>
												<option
													value=""
												>
													Select
													operator...
												</option>
												<option
													value="greater_than"
												>
													Greater
													than
												</option>
												<option
													value="less_than"
												>
													Less
													than
												</option>
												<option
													value="equals"
												>
													Equals
												</option>
												<option
													value="not_equals"
												>
													Not
													equals
												</option>
											</select>
										</div>
										<div
											class="col"
										>
											<label
												for="alert-threshold"
												>Threshold</label
											>
											<input
												type="number"
												id="alert-threshold"
												name="threshold"
												class="form-control"
												step="0.01"
												required
											/>
										</div>
									</div>
									<div
										class="form-row"
									>
										<div
											class="col"
										>
											<label
												for="alert-duration"
												>Duration
												(seconds)</label
											>
											<input
												type="number"
												id="alert-duration"
												name="duration"
												class="form-control"
												value="60"
												min="1"
												required
											/>
											<small
												class="form-text"
												>Alert
												triggers
												if
												condition
												persists
												for
												this
												duration</small
											>
										</div>
									</div>
								</div>

								<div
									class="form-section"
								>
									<h4>
										Action
									</h4>
									<div
										class="form-row"
									>
										<div
											class="col"
										>
											<label
												for="alert-action"
												>Action
												Type</label
											>
											<select
												id="alert-action"
												name="action"
												class="form-control"
												required
											>
												<option
													value=""
												>
													Select
													action...
												</option>
												<option
													value="email"
												>
													Send
													Email
												</option>
												<option
													value="webhook"
												>
													Webhook
												</option>
												<option
													value="log"
												>
													Log
													Only
												</option>
											</select>
										</div>
									</div>
									<div
										class="form-group"
										id="email-config"
										style="
											display: none;
										"
									>
										<label
											for="alert-email"
											>Email
											Address</label
										>
										<input
											type="email"
											id="alert-email"
											name="email"
											class="form-control"
										/>
									</div>
									<div
										class="form-group"
										id="webhook-config"
										style="
											display: none;
										"
									>
										<label
											for="alert-webhook"
											>Webhook
											URL</label
										>
										<input
											type="url"
											id="alert-webhook"
											name="webhook"
											class="form-control"
										/>
									</div>
								</div>

								<div
									class="form-actions"
								>
									<button
										type="button"
										class="btn btn-secondary"
										onclick="hideCreateAlertForm()"
									>
										Cancel
									</button>
									<button
										type="submit"
										class="btn btn-primary"
									>
										Create
										Alert
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Scripts -->
		<script src="js/shared.js"></script>
		<script src="js/app.js"></script>
		<script src="js/alerts.js"></script>
		<script src="js/alert-status.js"></script>
	</body>
</html>
